<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Profile</title>
  <link rel="stylesheet" href="/stylesheets/profile.css">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body class="page-wrapper">
  <%- include("nav-bar") %>
  <div class="avatar-wrapper">
  <img src="/images/uploads/<%=username.dp%>" alt="User Avatar" class="avatar">

  <form id="dpForm" action="/dp" method="post" enctype="multipart/form-data" style="display:none;">
    <input type="file" name="pp" id="dpInput" accept="image/*">
  </form>

  <div class="edit-icon" onclick="document.getElementById('dpInput').click()">âœŽ</div>
</div>
  
  <section class="resume-biography">
    <h1 class="username"><%= username.fullname %> </h1>
    <h5>@<%= username.username %> </h5>
  

    <div class="container">
  <p id="userBio"><%= username.bio %></p>

  <button class="edit-btn" onclick="toggleBioEdit()">Edit Bio</button>

  <div id="bioEditBox" class="bio-box" style="display: none;">
    <textarea id="bioInput" class="bio-textarea" rows="4"></textarea>

    <div style="margin-top: 10px;">
      <button class="save-btn" onclick="saveBio()">Save</button>
      <button class="cancel-btn" onclick="toggleBioEdit()">Cancel</button>
    </div>
  </div>
</div>
 <form action="/upload" method="POST" enctype="multipart/form-data" class="upload-container">
    <label for="file-upload">
      <div class="upload-icon">ðŸ“·</div>
    </label>
    <input id="file-upload" type="file" name="file" accept="image/*" class="file-input" required>

    <input type="text" name="filecaption" placeholder="Enter image caption..." class="caption-input" required>

    <button type="submit" class="upload-btn">Upload Image</button>
  </form>
 </section>
 
<div class="container">
  <div class="cards">
    <% username.posts.forEach(function(post){ %>
      <div class="card" style="width: 18rem;">
        <a href="/images/uploads/<%= post.image %>" download>
          <img src="/images/uploads/<%= post.image %>" class="card-img-top" alt="Image">
        </a>
        <div class="card-body">
          <h5 class="card-title"><%= post.imageText %></h5>
        </div>
        <a href="/delete/<%= post._id %>" onclick="return confirm('Delete this post?')">
      <button>Delete</button>
      </div>
    <% }) %>
  </div>
</div>
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
 <script src="/javascripts/profile.js"></script>
</body>
</html>